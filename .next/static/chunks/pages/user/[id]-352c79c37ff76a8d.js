(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{217:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[id]",function(){return s(3836)}])},7381:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});var a=s(5893),n=s(7294);function t(e){let{messages:r=["Считываем данные Telegram…","Проверяем подпись WebApp…","Создаём профиль…","Готово!"],intervalMs:s=900,done:t=!1}=e,[l,i]=(0,n.useState)(0),c=(0,n.useRef)(null),d=(0,n.useMemo)(()=>Array.isArray(r)&&r.length?r:["Загрузка…"],[r]);return(0,n.useEffect)(()=>{if(!t)return c.current=setInterval(()=>{i(e=>(e+1)%d.length)},s),()=>clearInterval(c.current)},[d.length,s,t]),(0,a.jsxs)("div",{className:"loading-card",children:[(0,a.jsxs)("div",{className:"loading-ring",children:[(0,a.jsx)("div",{className:"ring"}),(0,a.jsx)("div",{className:"ring blur"})]}),(0,a.jsx)("div",{className:"loading-text",children:(0,a.jsx)("div",{className:"line",children:d[l]})}),(0,a.jsx)("div",{className:"loading-bar",children:(0,a.jsx)("div",{className:"track",children:(0,a.jsx)("span",{className:"fill"})})})]})}},3836:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return d}});var a=s(5893),n=s(1163),t=s(7294),l=s(9008),i=s.n(l),c=s(7381);function d(){let{id:e}=(0,n.useRouter)().query,[r,s]=(0,t.useState)(null),[l,d]=(0,t.useState)(!0),[o,h]=(0,t.useState)(null);if((0,t.useEffect)(()=>{e&&r();async function r(){try{d(!0),h(null);let r=await fetch("/api/get-user?id=".concat(encodeURIComponent(e))),a=await r.json();if(!r.ok)throw Error(a.error||"Пользователь не найден");s(a.user)}catch(e){h(e.message)}finally{d(!1)}}},[e]),l)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"Загрузка профиля — Cloudес Market"})}),(0,a.jsxs)("div",{className:"overlay","aria-hidden":!0,children:[(0,a.jsx)("div",{className:"overlay-backdrop"}),(0,a.jsxs)("div",{className:"overlay-panel",children:[(0,a.jsx)(c.Z,{messages:["Загружаем профиль…","Получаем данные пользователя…","Почти готово…"],intervalMs:700}),(0,a.jsx)("div",{className:"overlay-hint",children:"Секунду…"})]})]})]});if(o)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"Ошибка — Cloudес Market"})}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"hero",style:{maxWidth:560,textAlign:"center"},children:[(0,a.jsx)("div",{className:"brand",children:(0,a.jsx)("a",{href:"/search",style:{color:"var(--muted)",textDecoration:"none"},children:"← Назад к поиску"})}),(0,a.jsx)("h1",{className:"h1",children:"Пользователь не найден"}),(0,a.jsx)("p",{className:"lead",style:{color:"#ffb4b4"},children:o}),(0,a.jsxs)("div",{className:"row",style:{justifyContent:"center"},children:[(0,a.jsx)("a",{className:"btn btn-primary",href:"/search",children:"Попробовать снова"}),(0,a.jsx)("a",{className:"btn btn-ghost",href:"/home",children:"На главную"})]})]})})]});if(!r)return null;let m=[r.first_name,r.last_name].filter(Boolean).join(" ")||"Без имени",u=r.username?"@".concat(r.username):"ID: ".concat(r.telegram_id),x=r.photo_url||"/placeholder.png",j=new Date(r.created_at).toLocaleDateString("ru-RU"),g=r.last_login?new Date(r.last_login).toLocaleDateString("ru-RU"):"Неизвестно";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsxs)("title",{children:[m," — Cloudес Market"]})}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"hero",style:{maxWidth:560},children:[(0,a.jsxs)("div",{className:"brand",style:{justifyContent:"space-between",width:"100%"},children:[(0,a.jsx)("a",{href:"/search",style:{color:"var(--muted)",textDecoration:"none"},children:"← Назад"}),(0,a.jsx)("span",{className:"badge",children:"Профиль"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginTop:16},children:[(0,a.jsx)("img",{src:x,alt:"avatar",style:{width:64,height:64,borderRadius:20,objectFit:"cover",border:"2px solid var(--border)"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h1",style:{fontSize:24,margin:"0 0 6px"},children:m}),(0,a.jsx)("div",{className:"lead",style:{fontSize:16,margin:0,color:"var(--brand)"},children:u})]})]}),(0,a.jsxs)("div",{style:{marginTop:24,padding:20,borderRadius:16,background:"var(--card)",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("strong",{style:{color:"var(--text)"},children:"Telegram ID:"}),(0,a.jsx)("span",{style:{marginLeft:8,color:"var(--muted)"},children:r.telegram_id})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("strong",{style:{color:"var(--text)"},children:"Зарегистрирован:"}),(0,a.jsx)("span",{style:{marginLeft:8,color:"var(--muted)"},children:j})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{style:{color:"var(--text)"},children:"Последняя активность:"}),(0,a.jsx)("span",{style:{marginLeft:8,color:"var(--muted)"},children:g})]})]}),(0,a.jsxs)("div",{className:"row",style:{marginTop:24},children:[(0,a.jsx)("a",{className:"btn btn-primary",href:"https://t.me/".concat(r.username||r.telegram_id),target:"_blank",rel:"noopener",children:"Написать в Telegram"}),(0,a.jsx)("a",{className:"btn btn-ghost",href:"/search",children:"Найти другого"})]})]})})]})}},9008:function(e,r,s){e.exports=s(7828)},1163:function(e,r,s){e.exports=s(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=217)}),_N_E=e.O()}]);