(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(4436)}])},4436:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return t}});var r=a(5893),n=a(7294),c=a(9008),l=a.n(c);function t(){let[e,s]=(0,n.useState)(""),[a,c]=(0,n.useState)(!1),[t,i]=(0,n.useState)([]),[o,u]=(0,n.useState)(null);async function d(e){let s=(e||"").replace(/^@/,"").trim();if(!s){i([]);return}try{c(!0),u(null);let e=await fetch("/api/search-users?q=".concat(encodeURIComponent(s))),a=await e.json();if(!e.ok)throw Error((null==a?void 0:a.error)||"Search error");i(a.users||[])}catch(e){u(e.message||"Ошибка поиска")}finally{c(!1)}}return(0,n.useEffect)(()=>{let s=setTimeout(()=>d(e),250);return()=>clearTimeout(s)},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Найти человека — Spectra"})}),(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"hero",children:[(0,r.jsxs)("div",{className:"brand",children:[(0,r.jsx)("a",{href:"/home",style:{color:"var(--muted)",textDecoration:"none"},children:"← Назад"}),(0,r.jsx)("span",{className:"badge",children:"Поиск"})]}),(0,r.jsx)("h1",{className:"h1",children:"Найти человека"}),(0,r.jsx)("p",{className:"lead",children:"Введи @никнейм пользователя, чтобы найти его в базе."}),(0,r.jsxs)("div",{className:"search-row",children:[(0,r.jsx)("span",{className:"at",children:"@"}),(0,r.jsx)("input",{className:"input",placeholder:"Введи никнейм...",value:e,onChange:e=>s(e.target.value),autoFocus:!0}),a&&(0,r.jsx)("div",{className:"search-spinner",children:"\uD83D\uDD0D"})]}),o&&(0,r.jsxs)("div",{className:"foot",style:{color:"#ffb4b4"},children:["Ошибка: ",o]}),(0,r.jsxs)("div",{className:"user-list",children:[t.map(e=>(0,r.jsxs)("a",{className:"user-row",href:"/user/".concat(e.username||e.telegram_id),children:[(0,r.jsx)("img",{src:e.photo_url||"/placeholder.png",alt:"",className:"user-avatar"}),(0,r.jsxs)("div",{className:"user-meta",children:[(0,r.jsx)("div",{className:"user-name",children:[e.first_name,e.last_name].filter(Boolean).join(" ")||"Без имени"}),(0,r.jsx)("div",{className:"user-handle",children:e.username?"@".concat(e.username):"ID: ".concat(e.telegram_id)})]}),(0,r.jsx)("span",{className:"user-open",children:"Открыть"})]},e.telegram_id)),!a&&!o&&0===t.length&&""!==e.trim()&&(0,r.jsx)("div",{className:"foot",children:"Пользователь не найден в базе."})]})]})})]})}},9008:function(e,s,a){e.exports=a(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);