# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è Telegram WebApp

## 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Supabase

1. –ó–∞–π–¥–∏ –Ω–∞ [supabase.com](https://supabase.com)
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ó–∞–ø–æ–º–Ω–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä–æ–ª—å

## 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã users

1. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor** –≤ –ø–∞–Ω–µ–ª–∏ Supabase
2. –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—ã–ø–æ–ª–Ω–∏ SQL –∏–∑ —Ñ–∞–π–ª–∞ `supabase-table.sql`
3. –¢–∞–±–ª–∏—Ü–∞ `users` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## 3. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –ü–µ—Ä–µ–π–¥–∏ –≤ **Settings** ‚Üí **API**
2. –°–∫–æ–ø–∏—Ä—É–π:
   - `URL` (Project URL)
   - `anon public` –∫–ª—é—á
   - `service_role` –∫–ª—é—á

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env.local` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
```
TELEGRAM_BOT_TOKEN=—Ç–≤–æ–π_–±–æ—Ç_—Ç–æ–∫–µ–Ω
NEXT_PUBLIC_SUPABASE_URL=https://—Ç–≤–æ–π-–ø—Ä–æ–µ–∫—Ç.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=—Ç–≤–æ–π_anon_–∫–ª—é—á
SUPABASE_SERVICE_ROLE=—Ç–≤–æ–π_service_role_–∫–ª—é—á
```

### –î–ª—è Vercel (–ø—Ä–æ–¥–∞–∫—à–Ω):
–î–æ–±–∞–≤—å —ç—Ç–∏ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ **Vercel Dashboard** ‚Üí **Settings** ‚Üí **Environment Variables**

**–í–∞–∂–Ω–æ:** Service Role –∫–ª—é—á –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

## 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
2. –û—Ç–∫—Ä–æ–π –≤ Telegram WebApp
3. –ù–∞–∂–º–∏ "Continue"
4. –ü—Ä–æ–≤–µ—Ä—å –≤ Supabase Dashboard ‚Üí **Table Editor** ‚Üí **users**, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–∏–ª—Å—è

## üéØ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Continue"

1. **Telegram WebApp** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `initData` –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö Telegram
3. **–ò–∑–≤–ª–µ–∫–∞–µ—Ç** –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, username, —Ñ–æ—Ç–æ)
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Supabase** (–∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –µ—Å—Ç—å)
5. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç** –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã users

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | UUID | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (Primary Key) |
| `telegram_id` | BIGINT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram |
| `first_name` | TEXT | –ò–º—è |
| `last_name` | TEXT | –§–∞–º–∏–ª–∏—è |
| `username` | TEXT | Username (@username) |
| `photo_url` | TEXT | –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä |
| `last_login` | TIMESTAMPTZ | –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∫–ª—é—á–µ–Ω **Row Level Security (RLS)**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Telegram WebApp
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é
- **Service Role** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## ‚ùó –í–∞–∂–Ω–æ

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `NEXT_PUBLIC_*` –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- `SUPABASE_SERVICE_ROLE` –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø - —Ö—Ä–∞–Ω–∏ –≤ —Å–µ–∫—Ä–µ—Ç–µ!
- Supabase `anon` –∫–ª—é—á –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RLS –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ